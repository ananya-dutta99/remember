<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Card Game</title>

<style>
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #111;
    font-family: monospace;
    overflow: hidden;
}

/* ---------- START SCREEN ---------- */

.start-screen,
.end-screen {
    position: absolute;
    text-align: center;
    color: pink;
    font-size: 18px;
    animation: float 3s ease-in-out infinite;
}

.start-screen button {
    margin-top: 20px;
    padding: 8px 20px;
    background: darkturquoise;
    border: none;
    border-radius: 8px;
    color: white;
    font-family: monospace;
    cursor: pointer;
    font-size: 14px;
}

.start-screen button:hover {
    opacity: 0.85;
}

@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
    100% { transform: translateY(0px); }
}

/* ---------- GAME LAYOUT---------- */

.game-container {
    width: 80vw;
    height: 80vh;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.8s ease;
}

.game-container.active {
    opacity: 1;
    pointer-events: all;
}

.game-board {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    width: min(80vw, calc(80vh * 4 / (3 * 1.414)));
}

.card {
    perspective: 1000px;
    cursor: pointer;
    aspect-ratio: 1 / 1.414;
    transition: opacity 1s ease;
}

.card.fade-out {
    opacity: 0;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.card.flip .card-inner {
    transform: rotateY(180deg);
}

.card.matched .card-inner {
    animation: bounce 0.5s ease;
}

.card-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 6px 12px rgba(0,0,0,0.5);
}

.card-face img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.card-front {
    transform: rotateY(180deg);
}

@keyframes bounce {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
}

/* End screen */
.end-screen {
    display: none;
    font-size: 22px;
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
    <div>hello! do you remember...</div>
    <button id="startBtn">start</button>
</div>

<!-- GAME -->
<div class="game-container" id="gameContainer">
    <div class="game-board" id="gameBoard"></div>
</div>

<!-- END SCREEN -->
<div class="end-screen" id="endScreen">
    yay &lt;3
</div>

<script>
const images = [
    "images/img1.jpeg",
    "images/img2.jpeg",
    "images/img3.jpeg",
    "images/img4.jpeg",
    "images/img5.jpeg",
    "images/img6.jpeg"
];

const backImage = "images/back.jpeg";

const gameBoard = document.getElementById("gameBoard");
const startScreen = document.getElementById("startScreen");
const startBtn = document.getElementById("startBtn");
const gameContainer = document.getElementById("gameContainer");
const endScreen = document.getElementById("endScreen");

let cardsArray;
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let matches = 0;

/* ---------- START BUTTON ---------- */

startBtn.addEventListener("click", () => {
    startScreen.style.display = "none";
    gameContainer.classList.add("active");
    startGame();
});

/* ---------- GAME SETUP ---------- */

function startGame() {
    cardsArray = [...images, ...images];
    cardsArray.sort(() => 0.5 - Math.random());
    createBoard();
}

function createBoard() {
    gameBoard.innerHTML = "";
    matches = 0;

    cardsArray.forEach((imgSrc) => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.dataset.image = imgSrc;

        card.innerHTML = `
            <div class="card-inner">
                <div class="card-face card-back">
                    <img src="${backImage}">
                </div>
                <div class="card-face card-front">
                    <img src="${imgSrc}">
                </div>
            </div>
        `;

        card.addEventListener("click", flipCard);
        gameBoard.appendChild(card);
    });
}

/* ---------- GAME LOGIC ---------- */

function flipCard() {
    if (lockBoard) return;
    if (this === firstCard) return;
    if (this.classList.contains("matched")) return;

    this.classList.add("flip");

    if (!firstCard) {
        firstCard = this;
        return;
    }

    secondCard = this;
    lockBoard = true;

    checkMatch();
}

function checkMatch() {
    const isMatch = firstCard.dataset.image === secondCard.dataset.image;

    if (isMatch) {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");
        matches++;

        resetBoard();

        if (matches === 6) {
            setTimeout(endGame, 3000);
        }
    } else {
        setTimeout(() => {
            firstCard.classList.remove("flip");
            secondCard.classList.remove("flip");
            resetBoard();
        }, 3000);
    }
}

function resetBoard() {
    firstCard = null;
    secondCard = null;
    lockBoard = false;
}

/* ---------- END GAME ---------- */

function endGame() {
    const allCards = document.querySelectorAll(".card");

    allCards.forEach(card => {
        card.classList.add("matched");
        card.classList.add("fade-out");
    });

    setTimeout(() => {
        gameContainer.style.display = "none";
        endScreen.style.display = "block";
    }, 1000);
}
</script>

</body>
</html>
